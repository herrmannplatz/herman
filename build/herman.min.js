/*! herman 2014-09-07 */
window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}(),function(a){var b=a.herman={};b.VERSION=0,b.namespace=function(a,c){var d=a.split("."),e=d.pop(),f=b;"herman"===d[0]&&d.shift();for(var g=0;g<d.length;g++)f=f[d[g]]=f[d[g]]||{};f[e]=c.call(this)},b.inherits=function(a,b){var c=Object.create(b.prototype);return c.constructor=a,a.prototype=c,a.prototype.super=b.prototype,a.prototype}}(window),herman.namespace("Renderer",function(){"use strict";function a(a){this.canvas=a,this.context=this.canvas.getContext("2d"),this.width=a.width,this.height=a.height}return a.prototype={update:function(a){this.context.clearRect(0,0,this.width,this.height),a.update(this.context)}},a}),herman.namespace("math.Matrix",function(){"use strict";function a(){this.identity()}var b=15,c=function(a,b){var c=a.a11,d=a.a12,e=a.a21,f=a.a22;a.a11=c*b.a11+d*b.a21,a.a12=c*b.a12+d*b.a22,a.a13=c*b.a13+d*b.a23+a.a13,a.a21=e*b.a11+f*b.a21,a.a22=e*b.a12+f*b.a22,a.a23=e*b.a13+f*b.a23+a.a23};return a.prototype.translate=function(a,b){return this.a13+=a,this.a23+=b,this},a.prototype.rotate=function(a){a=(a*herman.math.Utils.DEG_TO_RAD).toFixed(b);var c=Math.sin(a),d=Math.cos(a),e=this.a11,f=this.a21;return this.a11=d*e+c*this.a12,this.a12=-c*e+d*this.a12,this.a21=d*f+c*this.a22,this.a22=-c*f+d*this.a22,this},a.prototype.scale=function(a){return this.a11*=a,this.a12*=a,this.a21*=a,this.a22*=a,this},a.prototype.transform=function(a,b,c,d){return this.translate(a,b).rotate(c).scale(d)},a.prototype.multiply=function(a){return c(this,a),this},a.prototype.preMultiply=function(a){return c(a,this),this},a.prototype.inverse=function(){var b=1/this.determinant(),c=new a;return c.a11=this.a22*b,c.a12=-this.a12*b,c.a13=(this.a12*this.a23-this.a22*this.a13)*b,c.a21=-this.a21*b,c.a22=this.a11*b,c.a23=(this.a13*this.a21-this.a23*this.a11)*b,c.a31=0,c.a32=0,c.a33=(this.a11*this.a22-this.a21*this.a12)*b,c},a.prototype.determinant=function(){return this.a11*this.a22-this.a21*this.a12},a.prototype.identity=function(){return this.a11=this.a22=this.a33=1,this.a12=this.a13=this.a21=this.a23=this.a31=this.a32=0,this},a.prototype.isIdentity=function(){return 1===this.a11&&0===this.a12&&0===this.a13&&0===this.a21&&1===this.a22&&0===this.a23},a.prototype.decompose=function(){var a={};return a.rotation=herman.math.Utils.RAD_TO_DEG*Math.atan2(this.a21,this.a11),a},a.prototype.clone=function(){var b=new a;return b.a11=this.a11,b.a12=this.a12,b.a13=this.a13,b.a21=this.a21,b.a22=this.a22,b.a23=this.a23,b},a.prototype.print=function(){return"matrix\n"+this.a11+" "+this.a12+" "+this.a13+"\n"+this.a21+" "+this.a22+" "+this.a23+"\n"+this.a31+" "+this.a32+" "+this.a33+"\n"},a}),herman.namespace("math.Utils",function(){"use strict";var a={DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,angleBetweenPoints:function(){},intersect:function(){}};return a}),herman.namespace("math.Vector",function(){"use strict";function a(a,b){return this.x=a,this.y=b,this}return a.prototype.add=function(a){return this.x+=a.x,this.y+=a.y,this},a.prototype.substract=function(a){return this.x-=a.x,this.y-=a.y,this},a.prototype.normalize=function(){var a=this.length();return this.x/=a,this.y/=a,this},a.prototype.dot=function(a){return this.x*a.x+this.y*a.y},a.prototype.length=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},a}),herman.namespace("Tween",function(){"use strict";function a(b,c,d){var e,f,g,h={},i=(new Date).getTime(),j={},k=function(){};return Object.keys(c).forEach(function(a){j[a]=b[a]}),h.start=function(){!function a(){e=(new Date).getTime()-i,f=Math.min(e/d,1),Object.keys(c).forEach(function(a){b[a]=j[a]+(c[a]-j[a])*f}),window.renderer.update(window.stage),1>f?g=window.requestAnimationFrame(a):(k&&k(),window.cancelAnimationFrame(g))}()},h.stop=function(){window.cancelAnimationFrame(g)},h.clone=function(){return new a(b,c,d)},h.done=function(a){return k=a,this},h}return a}),herman.namespace("Node",function(){"use strict";function a(){this.tag=void 0,this.parent=void 0,this.children=[],this.matrix=new herman.math.Matrix,this.x=0,this.y=0,this.scale=1,this.rotation=0,this.anchorX=0,this.anchorY=0,this.width=0,this.height=0}return a.prototype.update=function(a){a.save(),this.updateMatrix(a),this.draw(a),a.restore();for(var b=0,c=this.children.length;c>b;b++)this.children[b].update(a)},a.prototype.draw=function(){},a.prototype.updateMatrix=function(a){if(this.matrix.identity().transform(this.x+this.anchorX,this.y+this.anchorY,this.rotation,this.scale),this.parent){var b=this.parent.matrix.clone();this.matrix=b.multiply(this.matrix)}a.setTransform(this.matrix.a11,this.matrix.a21,this.matrix.a12,this.matrix.a22,this.matrix.a13,this.matrix.a23)},a.prototype.localToGlobal=function(a,b){var c=this.matrix.clone();return c.translate(a,b),new herman.math.Vector(c.a13,c.a23)},a.prototype.globalToLocal=function(a,b){var c=this.matrix.clone();return new herman.math.Vector(a-c.a13,b-c.a23)},a.prototype.addChild=function(a){this.addChildAt(a,this.children.length)},a.prototype.addChildAt=function(b,c){if(0>c||c>this.children.length)throw new Error("index does not exist");b instanceof a&&!this.hasChild(b)&&(b.parent&&b.parent.removeChild(b),this.children.splice(c,0,b),b.parent=this)},a.prototype.removeChild=function(b){if(!(b instanceof a&&this.hasChild(b)))throw new Error("object is not a child");this.removeChildAt(this.children.indexOf(b))},a.prototype.removeChildAt=function(a){if(0>a||a>=this.children.length)throw new Error("index does not exist");this.children[a].parent=null,this.children.splice(a,1)},a.prototype.hasChild=function(a){return-1!==this.children.indexOf(a)},a.prototype.getChildren=function(){return this.children},a.prototype.getChildByTagName=function(){},a.prototype.getChildAt=function(a){if(0>a||a>=this.children.length)throw new Error("index does not exist");return this.children[a]},a}),herman.namespace("Sprite",function(){"use strict";function a(a){herman.Node.call(this),this.bitmap=a}return herman.inherits(a,herman.Node),a.prototype.draw=function(a){a.drawImage(this.bitmap,-this.bitmap.width/2,-this.bitmap.height/2)},a}),herman.namespace("Text",function(){"use strict";function a(a){herman.Node.call(this),this.text=a}return herman.inherits(a,herman.Node),a.prototype.draw=function(a){a.fillStyle="#00F",a.font="italic 30pt Arial",a.fillText(this.text,20,50)},a}),herman.namespace("audio.AudioPlayer",function(){"use strict";var a=function(){var a=null,b={},c=0,d=1,e={};return{background:{play:function(b,c){a&&(a.stop(),a=null),a=new herman.audio.Sound(b,c)},stop:function(){a.stop()},pause:function(){a.pause()},resume:function(){a.resume()},rewind:function(){a.play(0)},willPlay:function(){},isPlaying:function(){a.isPlaying()},getVolume:function(){return a.getVolume()},setVolume:function(){a.setVolume()}},effects:{play:function(a,e){return b[c]=new herman.audio.Sound(a,e,d),c},getVolume:function(){return d},setVolume:function(a){d=a,Object.keys(b).forEach(function(a){a.volume(d)})},pause:function(){b[c]&&b[c].pause()},pauseAll:function(){Object.keys(b).forEach(function(a){a.pause()})},resume:function(){b[c]&&b[c].resume()},resumeAll:function(){Object.keys(b).forEach(function(a){a.resume()})},stop:function(){b[c]&&b[c].stop()},stopAll:function(){Object.keys(b).forEach(function(a){a.stop()})}},preloader:{preload:function(a,b){var c=0;a.forEach(function(d){var f=new XMLHttpRequest;f.open("GET",d,!0),f.responseType="arraybuffer",f.onload=function(){e[d]=f.repspone,c++,c===a.length&&b&&b()},f.onerror=function(){console.warn("Unable to load "+d)},f.send()})}}}}();return a}),herman.namespace("audio.Sound",function(){"use strict";var a=function(){function a(a){var b=d.createBufferSource();b.buffer=a;var c=d.createGain();return b.connect(c),c.connect(d.destination),b.start=b.start||b.noteOn,b.stop=b.stop||b.noteOff,{source:b,gain:c}}function b(a,b,c){var e=this;this.gainNode=null,this.source=null,this.startOffset=0,this.startTime=0,this.loop="undefined"==typeof b?!1:b,this.volume="undefined"==typeof c?1:c;var f=new XMLHttpRequest;f.open("GET",a,!0),f.responseType="arraybuffer",f.onload=function(){d.decodeAudioData(f.response,function(a){e.buffer=a,e.play()},function(){console.warn("Unable to play background music "+a)})},f.send()}var c=window.AudioContext||window.webkitAudioContext,d=new c;return window.addEventListener("touchstart",function(){var a=d.createBuffer(1,1,22050),b=d.createBufferSource();b.buffer=a,b.connect(d.destination),b.start=b.start||b.noteOn,b.start(0)},!1),b.prototype.setVolume=function(a){this.gainNode&&(this.gainNode.gain.value=a)},b.prototype.getVolume=function(){return this.gainNode?this.gainNode.gain.value:void 0},b.prototype.play=function(b){if(this.source){this.stop();var c=a(this.buffer);this.source=c.source,this.gainNode=c.gain,this.source.loop=this.loop,this.gainNode.gain.value=this.volume,this.startTime=d.currentTime,this.source.start(0,b||0)}},b.prototype.pause=function(){this.stop(),this.startOffset+=d.currentTime-this.startTime},b.prototype.resume=function(){this.play(this.startOffset%this.buffer.duration)},b.prototype.stop=function(){this.source&&this.source.stop(0)},b.prototype.isPlaying=function(){return this.source?this.source.playbackState===this.source.PLAYING_STATE:void 0},b},b=function(){function a(a,b,c){this.loop="undefined"==typeof b?!1:b,this.volume="undefined"==typeof c?1:c,this.audio=document.createElement("audio"),this.audio.src=a,this.audio.loop=this.loop,this.audio.volume=this.volume,this.audio.play()}return a.prototype.setVolume=function(a){this.audio.volume=a},a.prototype.getVolume=function(){return this.audio.volume},a.prototype.play=function(a){this.audio.currentTime=a||0,this.audio.play()},a.prototype.pause=function(){this.audio.pause()},a.prototype.resume=function(){this.audio.play()},a.prototype.stop=function(){this.audio.pause(),this.audio.currentTime=0},a.prototype.isPlaying=function(){return!this.audio.paused},a},c=null;try{c=a()}catch(d){console.warn("Web Audio API is not supported in this browser"),c=b()}return c}),herman.namespace("DomNode",function(){function a(a){herman.Node.call(this),a?this.element=a:(this.element=document.createElement("div"),this.element.className="div-node",this.element.style.width="100px",this.element.style.height="100px",this.element.style.backgroundColor="white",this.element.style.border="1px solid red"),this.element.style.webkitPerspective=1e3,this.element.style.webkitBackfaceVisibility="hidden",this.element.style.position="absolute"}return herman.inherits(a,herman.Node),a.prototype.update=function(){this.updateMatrix(),this.draw();for(var a=0,b=this.children.length;b>a;a++)this.children[a].update()},a.prototype.updateMatrix=function(){if(this.matrix.identity().transform(this.x+this.anchorX,this.y+this.anchorY,this.rotation,this.scale),this.parent){var a=this.parent.matrix.clone();this.matrix=a.multiply(this.matrix)}var b="matrix("+this.matrix.a11+","+this.matrix.a21+","+this.matrix.a12+","+this.matrix.a22+","+this.matrix.a13+","+this.matrix.a23+")";this.element.style.webkitTransform=b},a.prototype.addChild=function(a){this.super.addChild.apply(this,arguments),this.updateMatrix(),document.getElementById("domStage").appendChild(a.element)},a.prototype.removeChild=function(a){this.super.removeChild.apply(this,arguments),document.getElementById("domStage").removeChild(a.element)},a});