!function t(e,i,n){function r(a,s){if(!i[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+a+"'")}var h=i[a]={exports:{}};e[a][0].call(h.exports,function(t){var i=e[a][1][t];return r(i?i:t)},h,h.exports,t,e,i,n)}return i[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)r(n[a]);return r}({1:[function(t,e,i){"use strict";var n=function(){var t=null,e={},i=0,n=1,r={};return{background:{play:function(e,i){t&&(t.stop(),t=null),t=new herman.audio.Sound(e,i)},stop:function(){t.stop()},pause:function(){t.pause()},resume:function(){t.resume()},rewind:function(){t.play(0)},willPlay:function(){},isPlaying:function(){t.isPlaying()},getVolume:function(){return t.getVolume()},setVolume:function(e){t.setVolume()}},effects:{play:function(t,r){return e[i]=new herman.audio.Sound(t,r,n),i},getVolume:function(){return n},setVolume:function(t){n=t,Object.keys(e).forEach(function(t){t.volume(n)})},pause:function(t){e[i]&&e[i].pause()},pauseAll:function(){Object.keys(e).forEach(function(t){t.pause()})},resume:function(t){e[i]&&e[i].resume()},resumeAll:function(){Object.keys(e).forEach(function(t){t.resume()})},stop:function(t){e[i]&&e[i].stop()},stopAll:function(){Object.keys(e).forEach(function(t){t.stop()})}},preloader:{preload:function(t,e){var i=0;t.forEach(function(n){var o=new XMLHttpRequest;o.open("GET",n,!0),o.responseType="arraybuffer",o.onload=function(a){r[n]=o.repspone,i++,i===t.length&&e&&e()},o.onerror=function(t){console.warn("Unable to load "+n)},o.send()})}}}}();e.exports=n},{}],2:[function(t,e,i){"use strict";var n=function(){function t(t){var e=n.createBufferSource();e.buffer=t;var i=n.createGain();return e.connect(i),i.connect(n.destination),e.start=e.start||e.noteOn,e.stop=e.stop||e.noteOff,{source:e,gain:i}}function e(t,e,i){var r=this;this.gainNode=null,this.source=null,this.startOffset=0,this.startTime=0,this.loop="undefined"==typeof e?!1:e,this.volume="undefined"==typeof i?1:i;var o=new XMLHttpRequest;o.open("GET",t,!0),o.responseType="arraybuffer",o.onload=function(){n.decodeAudioData(o.response,function(t){r.buffer=t,r.play()},function(e){console.warn("Unable to play background music "+t)})},o.send()}var i=window.AudioContext||window.webkitAudioContext,n=new i;return window.addEventListener("touchstart",function(){var t=n.createBuffer(1,1,22050),e=n.createBufferSource();e.buffer=t,e.connect(n.destination),e.start=e.start||e.noteOn,e.start(0)},!1),e.prototype.setVolume=function(t){this.gainNode&&(this.gainNode.gain.value=t)},e.prototype.getVolume=function(){return this.gainNode?this.gainNode.gain.value:void 0},e.prototype.play=function(e){if(!this.source){this.stop();var i=t(this.buffer);this.source=i.source,this.gainNode=i.gain,this.source.loop=this.loop,this.gainNode.gain.value=this.volume,this.startTime=n.currentTime,this.source.start(0,e||0)}},e.prototype.pause=function(){this.stop(),this.startOffset+=n.currentTime-this.startTime},e.prototype.resume=function(){this.play(this.startOffset%this.buffer.duration)},e.prototype.stop=function(){this.source&&this.source.stop(0)},e.prototype.isPlaying=function(){return this.source&&this.source.playbackState===this.source.PLAYING_STATE},e},r=function(){function t(t,e,i){this.loop="undefined"==typeof e?!1:e,this.volume="undefined"==typeof i?1:i,this.audio=document.createElement("audio"),this.audio.src=t,this.audio.loop=this.loop,this.audio.volume=this.volume,this.audio.play()}return t.prototype.setVolume=function(t){this.audio.volume=t},t.prototype.getVolume=function(){return this.audio.volume},t.prototype.play=function(t){this.audio.currentTime=t||0,this.audio.play()},t.prototype.pause=function(){this.audio.pause()},t.prototype.resume=function(){this.audio.play()},t.prototype.stop=function(){this.audio.pause(),this.audio.currentTime=0},t.prototype.isPlaying=function(){return!this.audio.paused},t},o=null;try{o=n()}catch(a){console.warn("Web Audio API is not supported in this browser"),o=r()}e.exports=o},{}],3:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(t,e,i){for(var n=!0;n;){var r=t,o=e,a=i;s=h=u=void 0,n=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(a)}var h=Object.getPrototypeOf(r);if(null===h)return void 0;t=h,e=o,i=a,n=!0}},s=t("../scene/Node"),u=function(t){function e(t){n(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),t?this.element=t:(this.element=document.createElement("div"),this.element.className="div-node",this.element.style.width="100px",this.element.style.height="100px",this.element.style.backgroundColor="white",this.element.style.border="1px solid red"),this.element.style.webkitPerspective=1e3,this.element.style.webkitBackfaceVisibility="hidden",this.element.style.position="absolute"}return r(e,t),o(e,[{key:"update",value:function(){this.updateMatrix(),this.draw();for(var t=0,e=this.children.length;e>t;t++)this.children[t].update()}},{key:"updateMatrix",value:function(){if(this.matrix.identity().transform(this.x+this.anchorX,this.y+this.anchorY,this.rotation,this.scale),this.parent){var t=this.parent.matrix.clone();this.matrix=t.multiply(this.matrix)}var e="matrix("+this.matrix.a11+","+this.matrix.a21+","+this.matrix.a12+","+this.matrix.a22+","+this.matrix.a13+","+this.matrix.a23+")";this.element.style.webkitTransform=e}},{key:"addChild",value:function(t){a(Object.getPrototypeOf(e.prototype),"addChild",this).apply(this,arguments),this.updateMatrix(),document.getElementById("domStage").appendChild(t.element)}},{key:"removeChild",value:function(t){a(Object.getPrototypeOf(e.prototype),"removeChild",this).apply(this,arguments),document.getElementById("domStage").removeChild(t.element)}}]),e}(s);e.exports=u},{"../scene/Node":9}],4:[function(t,e,i){"use strict";var n=window.herman={};t("./utils/polyfill"),n.math={},n.math.utils=t("./math/Vector"),n.math.Vector=t("./math/Vector"),n.math.Matrix=t("./math/Matrix"),n.Node=t("./scene/Node"),n.Sprite=t("./scene/Sprite"),n.Text=t("./scene/Text"),n.Renderer=t("./render/Renderer"),n.audio={},n.audio.AudioPlayer=t("./audio/AudioPlayer"),n.audio.Sound=t("./audio/Sound"),n.DomNode=t("./experimental/DomNode")},{"./audio/AudioPlayer":1,"./audio/Sound":2,"./experimental/DomNode":3,"./math/Matrix":5,"./math/Vector":6,"./render/Renderer":8,"./scene/Node":9,"./scene/Sprite":10,"./scene/Text":11,"./utils/polyfill":13}],5:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=t("./utils.js"),a=15,s=function(t,e){var i=t.a11,n=t.a12,r=t.a21,o=t.a22;t.a11=i*e.a11+n*e.a21,t.a12=i*e.a12+n*e.a22,t.a13=i*e.a13+n*e.a23+t.a13,t.a21=r*e.a11+o*e.a21,t.a22=r*e.a12+o*e.a22,t.a23=r*e.a13+o*e.a23+t.a23},u=function(){function t(){n(this,t),this.identity()}return r(t,[{key:"translate",value:function(t,e){return this.a13+=t,this.a23+=e,this}},{key:"rotate",value:function(t){t=(t*o.DEG_TO_RAD).toFixed(a);var e=Math.sin(t),i=Math.cos(t),n=this.a11,r=this.a21;return this.a11=i*n+e*this.a12,this.a12=-e*n+i*this.a12,this.a21=i*r+e*this.a22,this.a22=-e*r+i*this.a22,this}},{key:"scale",value:function(t){return this.a11*=t,this.a12*=t,this.a21*=t,this.a22*=t,this}},{key:"transform",value:function(t,e,i,n){return this.translate(t,e).rotate(i).scale(n)}},{key:"multiply",value:function(t){return s(this,t),this}},{key:"preMultiply",value:function(t){return s(t,this),this}},{key:"inverse",value:function(){var e=1/this.determinant(),i=new t;return i.a11=this.a22*e,i.a12=-this.a12*e,i.a13=(this.a12*this.a23-this.a22*this.a13)*e,i.a21=-this.a21*e,i.a22=this.a11*e,i.a23=(this.a13*this.a21-this.a23*this.a11)*e,i.a31=0,i.a32=0,i.a33=(this.a11*this.a22-this.a21*this.a12)*e,i}},{key:"determinant",value:function(){return this.a11*this.a22-this.a21*this.a12}},{key:"identity",value:function(){return this.a11=this.a22=this.a33=1,this.a12=this.a13=this.a21=this.a23=this.a31=this.a32=0,this}},{key:"isIdentity",value:function(){return 1===this.a11&&0===this.a12&&0===this.a13&&0===this.a21&&1===this.a22&&0===this.a23}},{key:"decompose",value:function(){var t={};return t.rotation=herman.math.Utils.RAD_TO_DEG*Math.atan2(this.a21,this.a11),t}},{key:"clone",value:function(){var e=new t;return e.a11=this.a11,e.a12=this.a12,e.a13=this.a13,e.a21=this.a21,e.a22=this.a22,e.a23=this.a23,e}},{key:"print",value:function(){return"matrix\n"+this.a11+" "+this.a12+" "+this.a13+"\n"+this.a21+" "+this.a22+" "+this.a23+"\n"+this.a31+" "+this.a32+" "+this.a33+"\n"}}]),t}();e.exports=u},{"./utils.js":7}],6:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=function(){function t(e,i){return n(this,t),this.x=e,this.y=i,this}return r(t,[{key:"add",value:function(t){return this.x+=t.x,this.y+=t.y,this}},{key:"substract",value:function(t){return this.x-=t.x,this.y-=t.y,this}},{key:"normalize",value:function(){var t=this.length();return this.x/=t,this.y/=t,this}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y}},{key:"length",value:function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))}}]),t}();e.exports=o},{}],7:[function(t,e,i){"use strict";e.exports={DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,angleBetweenPoints:function(t,e){},intersect:function(t,e){}}},{}],8:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=function(){function t(e){n(this,t),this.canvas=e,this.context=this.canvas.getContext("2d"),this.width=e.width,this.height=e.height}return r(t,[{key:"update",value:function(t){this.context.clearRect(0,0,this.width,this.height),t.update(this.context)}}]),t}();e.exports=o},{}],9:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=t("../math/Vector"),a=t("../math/Matrix"),s=function(){function t(){n(this,t),this.tag=void 0,this.parent=void 0,this.children=[],this.matrix=new a,this.x=0,this.y=0,this.scale=1,this.rotation=0,this.anchorX=0,this.anchorY=0,this.width=0,this.height=0}return r(t,[{key:"update",value:function(t){t.save(),this.updateMatrix(t),this.draw(t),t.restore();for(var e=0,i=this.children.length;i>e;e++)this.children[e].update(t)}},{key:"draw",value:function(t){}},{key:"updateMatrix",value:function(t){if(this.matrix.identity().transform(this.x+this.anchorX,this.y+this.anchorY,this.rotation,this.scale),this.parent){var e=this.parent.matrix.clone();this.matrix=e.multiply(this.matrix)}t.setTransform(this.matrix.a11,this.matrix.a21,this.matrix.a12,this.matrix.a22,this.matrix.a13,this.matrix.a23)}},{key:"localToGlobal",value:function(t,e){var i=this.matrix.clone();return i.translate(t,e),new o(i.a13,i.a23)}},{key:"globalToLocal",value:function(t,e){var i=this.matrix.clone();return new o(t-i.a13,e-i.a23)}},{key:"addChild",value:function(t){this.addChildAt(t,this.children.length)}},{key:"addChildAt",value:function(t,e){if(0>e||e>this.children.length)throw new Error("index does not exist");t&&t.hasChild&&!this.hasChild(t)&&(t.parent&&t.parent.removeChild(t),this.children.splice(e,0,t),t.parent=this)}},{key:"removeChild",value:function(t){if(!this.hasChild(t))throw new Error("object is not a child");this.removeChildAt(this.children.indexOf(t))}},{key:"removeChildAt",value:function(t){if(0>t||t>=this.children.length)throw new Error("index does not exist");this.children[t].parent=null,this.children.splice(t,1)}},{key:"hasChild",value:function(t){return-1!==this.children.indexOf(t)}},{key:"getChildren",value:function(){return this.children}},{key:"getChildByTagName",value:function(t){}},{key:"getChildAt",value:function(t){if(0>t||t>=this.children.length)throw new Error("index does not exist");return this.children[t]}}]),t}();e.exports=s},{"../math/Matrix":5,"../math/Vector":6}],10:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(t,e,i){for(var n=!0;n;){var r=t,o=e,a=i;s=h=u=void 0,n=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(a)}var h=Object.getPrototypeOf(r);if(null===h)return void 0;t=h,e=o,i=a,n=!0}},s=t("./node"),u=function(t){function e(t){n(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.bitmap=t}return r(e,t),o(e,[{key:"draw",value:function(t){t.drawImage(this.bitmap,-this.bitmap.width/2,-this.bitmap.height/2)}}]),e}(s);e.exports=u},{"./node":12}],11:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(t,e,i){for(var n=!0;n;){var r=t,o=e,a=i;s=h=u=void 0,n=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(a)}var h=Object.getPrototypeOf(r);if(null===h)return void 0;t=h,e=o,i=a,n=!0}},s=t("./node"),u=function(t){function e(t){n(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.text=t}return r(e,t),o(e,[{key:"draw",value:function(t){t.fillStyle="#00F",t.font="italic 30pt Arial",t.fillText(this.text,20,50)}}]),e}(s);e.exports=u},{"./node":12}],12:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=t("../math/Vector"),a=t("../math/Matrix"),s=function(){function t(){n(this,t),this.tag=void 0,this.parent=void 0,this.children=[],this.matrix=new a,this.x=0,this.y=0,this.scale=1,this.rotation=0,this.anchorX=0,this.anchorY=0,this.width=0,this.height=0}return r(t,[{key:"update",value:function(t){t.save(),this.updateMatrix(t),this.draw(t),t.restore();for(var e=0,i=this.children.length;i>e;e++)this.children[e].update(t)}},{key:"draw",value:function(t){}},{key:"updateMatrix",value:function(t){if(this.matrix.identity().transform(this.x+this.anchorX,this.y+this.anchorY,this.rotation,this.scale),this.parent){var e=this.parent.matrix.clone();this.matrix=e.multiply(this.matrix)}t.setTransform(this.matrix.a11,this.matrix.a21,this.matrix.a12,this.matrix.a22,this.matrix.a13,this.matrix.a23)}},{key:"localToGlobal",value:function(t,e){var i=this.matrix.clone();return i.translate(t,e),new o(i.a13,i.a23)}},{key:"globalToLocal",value:function(t,e){var i=this.matrix.clone();return new o(t-i.a13,e-i.a23)}},{key:"addChild",value:function(t){this.addChildAt(t,this.children.length)}},{key:"addChildAt",value:function(t,e){if(0>e||e>this.children.length)throw new Error("index does not exist");t&&t.hasChild&&!this.hasChild(t)&&(t.parent&&t.parent.removeChild(t),this.children.splice(e,0,t),t.parent=this)}},{key:"removeChild",value:function(t){if(!this.hasChild(t))throw new Error("object is not a child");this.removeChildAt(this.children.indexOf(t))}},{key:"removeChildAt",value:function(t){if(0>t||t>=this.children.length)throw new Error("index does not exist");this.children[t].parent=null,this.children.splice(t,1)}},{key:"hasChild",value:function(t){return-1!==this.children.indexOf(t)}},{key:"getChildren",value:function(){return this.children}},{key:"getChildByTagName",value:function(t){}},{key:"getChildAt",value:function(t){if(0>t||t>=this.children.length)throw new Error("index does not exist");return this.children[t]}}]),t}();e.exports=s},{"../math/Matrix":5,"../math/Vector":6}],13:[function(t,e,i){"use strict";window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}()},{}]},{},[4]);