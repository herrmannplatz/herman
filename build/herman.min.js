/*! herman 2014-06-24 */
!function(a){var b=a.herman={};b.VERSION=.1,b.namespace=function(a,c){var d=a.split("."),e=d.pop(),f=b;"herman"===d[0]&&d.shift();for(var g=0;g<d.length;g++)f=f[d[g]]=f[d[g]]||{};f[e]=c.call(this)},b.inherits=function(a,b){var c=Object.create(b.prototype);return c.constructor=a,a.prototype=c,a.prototype.super=b.prototype,a.prototype},a.requestAnimFrame=function(){return a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||function(b){a.setTimeout(b,1e3/60)}}()}(window),herman.namespace("Renderer",function(){"use strict";function a(a){this.canvas=a,this.context=this.canvas.getContext("2d"),this.width=a.width,this.height=a.height}return a.prototype={update:function(a){this.context.clearRect(0,0,this.width,this.height),a.update(this.context)}},a}),herman.namespace("math.Matrix",function(){"use strict";function a(){this.identity()}var b=15,c=function(a,b){var c=a.a11,d=a.a12,e=a.a21,f=a.a22;a.a11=c*b.a11+d*b.a21,a.a12=c*b.a12+d*b.a22,a.a13=c*b.a13+d*b.a23+a.a13,a.a21=e*b.a11+f*b.a21,a.a22=e*b.a12+f*b.a22,a.a23=e*b.a13+f*b.a23+a.a23};return a.prototype.translate=function(a,b){return this.a13+=a,this.a23+=b,this},a.prototype.rotate=function(a){a=(a*herman.math.Utils.DEG_TO_RAD).toFixed(b);var c=Math.sin(a),d=Math.cos(a),e=this.a11,f=this.a21;return this.a11=d*e+c*this.a12,this.a12=-c*e+d*this.a12,this.a21=d*f+c*this.a22,this.a22=-c*f+d*this.a22,this},a.prototype.scale=function(a){return this.a11*=a,this.a12*=a,this.a21*=a,this.a22*=a,this},a.prototype.transform=function(a,b,c,d){return this.translate(a,b).rotate(c).scale(d)},a.prototype.multiply=function(a){return c(this,a),this},a.prototype.preMultiply=function(a){return c(a,this),this},a.prototype.inverse=function(){var b=1/this.determinant(),c=new a;return c.a11=this.a22*b,c.a12=-this.a12*b,c.a13=(this.a12*this.a23-this.a22*this.a13)*b,c.a21=-this.a21*b,c.a22=this.a11*b,c.a23=(this.a13*this.a21-this.a23*this.a11)*b,c.a31=0,c.a32=0,c.a33=(this.a11*this.a22-this.a21*this.a12)*b,c},a.prototype.determinant=function(){return this.a11*this.a22-this.a21*this.a12},a.prototype.identity=function(){return this.a11=this.a22=this.a33=1,this.a12=this.a13=this.a21=this.a23=this.a31=this.a32=0,this},a.prototype.isIdentity=function(){return 1===this.a11&&0===this.a12&&0===this.a13&&0===this.a21&&1===this.a22&&0===this.a23},a.prototype.decompose=function(){var a={};return a.rotation=herman.math.Utils.RAD_TO_DEG*Math.atan2(this.a21,this.a11),a},a.prototype.clone=function(){var b=new a;return b.a11=this.a11,b.a12=this.a12,b.a13=this.a13,b.a21=this.a21,b.a22=this.a22,b.a23=this.a23,b},a.prototype.print=function(){return"matrix\n"+this.a11+" "+this.a12+" "+this.a13+"\n"+this.a21+" "+this.a22+" "+this.a23+"\n"+this.a31+" "+this.a32+" "+this.a33+"\n"},a}),herman.namespace("math.Utils",function(){"use strict";var a={DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,angleBetweenPoints:function(){},intersect:function(){}};return a}),herman.namespace("math.Vector",function(){"use strict";function a(a,b){return this.x=a,this.y=b,this}return a.prototype.add=function(a){return this.x+=a.x,this.y+=a.y,this},a.prototype.substract=function(a){return this.x-=a.x,this.y-=a.y,this},a.prototype.normalize=function(){var a=this.length();return this.x/=a,this.y/=a,this},a.prototype.dot=function(a){return this.x*a.x+this.y*a.y},a.prototype.length=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},a}),herman.namespace("Tween",function(){"use strict";function a(b,c,d){var e,f,g,h={},i=(new Date).getTime(),j={},k=function(){};return Object.keys(c).forEach(function(a){j[a]=b[a]}),h.start=function(){!function a(){e=(new Date).getTime()-i,f=Math.min(e/d,1),Object.keys(c).forEach(function(a){b[a]=j[a]+(c[a]-j[a])*f}),window.renderer.update(window.stage),1>f?g=window.requestAnimationFrame(a):(k&&k(),window.cancelAnimationFrame(g))}()},h.stop=function(){window.cancelAnimationFrame(g)},h.clone=function(){return new a(b,c,d)},h.done=function(a){return k=a,this},h}return a}),herman.namespace("Node",function(){"use strict";function a(){this.tag=void 0,this.parent=void 0,this.children=[],this.matrix=new herman.math.Matrix,this.x=0,this.y=0,this.scale=1,this.rotation=0,this.anchorX=0,this.anchorY=0,this.width=0,this.height=0}return a.prototype.update=function(a){a.save(),this.updateMatrix(a),this.draw(a),a.restore();for(var b=0,c=this.children.length;c>b;b++)this.children[b].update(a)},a.prototype.draw=function(){},a.prototype.updateMatrix=function(a){if(this.matrix.identity().transform(this.x+this.anchorX,this.y+this.anchorY,this.rotation,this.scale),this.parent){var b=this.parent.matrix.clone();this.matrix=b.multiply(this.matrix)}a.setTransform(this.matrix.a11,this.matrix.a21,this.matrix.a12,this.matrix.a22,this.matrix.a13,this.matrix.a23)},a.prototype.localToGlobal=function(a,b){var c=this.matrix.clone();return c.translate(a,b),new herman.math.Vector(c.a13,c.a23)},a.prototype.globalToLocal=function(a,b){var c=this.matrix.clone();return new herman.math.Vector(a-c.a13,b-c.a23)},a.prototype.addChild=function(a){this.addChildAt(a,this.children.length)},a.prototype.addChildAt=function(b,c){if(0>c||c>this.children.length)throw new Error("index does not exist");b instanceof a&&!this.hasChild(b)&&(b.parent&&b.parent.removeChild(b),this.children.splice(c,0,b),b.parent=this)},a.prototype.removeChild=function(b){if(!(b instanceof a&&this.hasChild(b)))throw new Error("object is not a child");this.removeChildAt(this.children.indexOf(b))},a.prototype.removeChildAt=function(a){if(0>a||a>=this.children.length)throw new Error("index does not exist");this.children[a].parent=null,this.children.splice(a,1)},a.prototype.hasChild=function(a){return-1!==this.children.indexOf(a)},a.prototype.getChildren=function(){return this.children},a.prototype.getChildByTagName=function(){},a.prototype.getChildAt=function(a){if(0>a||a>=this.children.length)throw new Error("index does not exist");return this.children[a]},a}),herman.namespace("Sprite",function(){"use strict";function a(a){herman.Node.call(this),this.bitmap=a}return herman.inherits(a,herman.Node),a.prototype.draw=function(a){a.drawImage(this.bitmap,-this.bitmap.width/2,-this.bitmap.height/2)},a}),herman.namespace("Text",function(){"use strict";function a(a){herman.Node.call(this),this.text=a}return herman.inherits(a,herman.Node),a.prototype.draw=function(a){a.fillStyle="#00F",a.font="italic 30pt Arial",a.fillText(this.text,20,50)},a}),herman.namespace("DomNode",function(){function a(a){herman.Node.call(this),a?this.element=a:(this.element=document.createElement("div"),this.element.className="div-node",this.element.style.width="100px",this.element.style.height="100px",this.element.style.backgroundColor="white",this.element.style.border="1px solid red"),this.element.style.webkitPerspective=1e3,this.element.style.webkitBackfaceVisibility="hidden",this.element.style.position="absolute"}return herman.inherits(a,herman.Node),a.prototype.update=function(){this.updateMatrix(),this.draw();for(var a=0,b=this.children.length;b>a;a++)this.children[a].update()},a.prototype.updateMatrix=function(){if(this.matrix.identity().transform(this.x+this.anchorX,this.y+this.anchorY,this.rotation,this.scale),this.parent){var a=this.parent.matrix.clone();this.matrix=a.multiply(this.matrix)}var b="matrix("+this.matrix.a11+","+this.matrix.a21+","+this.matrix.a12+","+this.matrix.a22+","+this.matrix.a13+","+this.matrix.a23+")";this.element.style.webkitTransform=b},a.prototype.addChild=function(a){this.super.addChild.apply(this,arguments),this.updateMatrix(),document.getElementById("domStage").appendChild(a.element)},a.prototype.removeChild=function(a){this.super.removeChild.apply(this,arguments),document.getElementById("domStage").removeChild(a.element)},a});