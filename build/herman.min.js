/*! herman 2014-05-18 */
!function(a){var b=a.herman={};b.VERSION=.1,b.namespace=function(a,c){var d=a.split("."),e=d.pop(),f=b;"herman"===d[0]&&d.shift();for(var g=0;g<d.length;g++)f=f[d[g]]=f[d[g]]||{};f[e]=c.call(this)},b.inherits=function(a,b){var c=Object.create(b.prototype);return c.constructor=a,a.prototype=c,a.prototype.super=b.prototype,a.prototype},a.requestAnimFrame=function(){return a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||function(b){a.setTimeout(b,1e3/60)}}()}(window),herman.namespace("Renderer",function(){"use strict";function a(a){this.canvas=a,this.context=this.canvas.getContext("2d")}return a.prototype={update:function(a){this.canvas.width=this.canvas.width,a.update(this.context)}},a}),herman.namespace("math.Utils",function(){"use strict";var a={DEG_TO_RAD:Math.PI/180,angleBetweenPoints:function(){},intersect:function(){}};return a}),herman.namespace("math.Matrix",function(){"use strict";function a(){this.identity()}var b=15;return a.prototype.translate=function(a,b){return this.a13+=a,this.a23+=b,this},a.prototype.rotate=function(a){a=(a*herman.math.Utils.DEG_TO_RAD).toFixed(b);var c=Math.sin(a),d=Math.cos(a),e=this.a11,f=this.a21;return this.a11=d*e+c*this.a12,this.a12=-c*e+d*this.a12,this.a21=d*f+c*this.a22,this.a22=-c*f+d*this.a22,this},a.prototype.scale=function(a){return this.a11*=a,this.a12*=a,this.a21*=a,this.a22*=a,this},a.prototype.transform=function(a,b,c,d){return this.translate(a,b).rotate(c).scale(d)},a.prototype.multiply=function(a){var b=this.a11,c=this.a12,d=this.a21,e=this.a22;return this.a11=b*a.a11+c*a.a21,this.a12=b*a.a12+c*a.a22,this.a13=b*a.a13+c*a.a23+this.a13,this.a21=d*a.a11+e*a.a21,this.a22=d*a.a12+e*a.a22,this.a23=d*a.a13+e*a.a23+this.a23,this},a.prototype.inverse=function(){var b=1/this.determinant(),c=new a;return c.a11=this.a22*b,c.a12=-this.a12*b,c.a13=(this.a12*this.a23-this.a22*this.a13)*b,c.a21=-this.a21*b,c.a22=this.a11*b,c.a23=(this.a13*this.a21-this.a23*this.a11)*b,c.a31=0,c.a32=0,c.a33=(this.a11*this.a22-this.a21*this.a12)*b,c},a.prototype.determinant=function(){return this.a11*this.a22-this.a21*this.a12},a.prototype.identity=function(){return this.a11=this.a22=this.a33=1,this.a12=this.a13=this.a21=this.a23=this.a31=this.a32=0,this},a.prototype.isIdentity=function(){return 1===this.a11&&0===this.a12&&0===this.a13&&0===this.a21&&1===this.a22&&0===this.a23},a.prototype.print=function(){return"matrix\n"+this.a11+" "+this.a12+" "+this.a13+"\n"+this.a21+" "+this.a22+" "+this.a23+"\n0 0 1\n"},a}),herman.namespace("math.Vector",function(){"use strict";function a(a,b){return this.x=a,this.y=b,this}return a.prototype.add=function(a){return this.x+=a.x,this.y+=a.y,this},a.prototype.substract=function(a){return this.x-=a.x,this.y-=a.y,this},a.prototype.normalize=function(){var a=this.length();return this.x/=a,this.y/=a,this},a.prototype.dot=function(a){return this.x*a.x+this.y*a.y},a.prototype.length=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},a}),herman.namespace("Tween",function(){"use strict";function a(b,c,d){var e,f,g,h={},i=(new Date).getTime(),j={},k=function(){};return Object.keys(c).forEach(function(a){j[a]=b[a]}),h.start=function(){!function a(){e=(new Date).getTime()-i,f=Math.min(e/d,1),Object.keys(c).forEach(function(a){b[a]=j[a]+(c[a]-j[a])*f}),window.renderer.update(window.stage),1>f?g=window.requestAnimationFrame(a):(k&&k(),window.cancelAnimationFrame(g))}()},h.stop=function(){window.cancelAnimationFrame(g)},h.clone=function(){return new a(b,c,d)},h.done=function(a){return k=a,this},h}return a}),herman.namespace("Node",function(){"use strict";function a(){this.tag=void 0,this.stage=void 0,this.parent=void 0,this.children=[],this.matrix=new herman.math.Matrix,this.x=0,this.y=0,this.scale=1,this.rotation=0,this.anchorX=0,this.anchorY=0,this.width=0,this.height=0}return a.prototype.update=function(a){this.children.forEach(function(b){b.update(a)})},a.prototype.getMatrix=function(){return this.matrix=(new herman.math.Matrix).transform(this.x+this.anchorX,this.y+this.anchorY,this.rotation,this.scale),this.parent&&(this.matrix=this.parent.getMatrix().multiply(this.matrix)),this.matrix},a.prototype.localToGlobal=function(a,b){var c=this.getMatrix();return c.translate(a,b),new herman.math.Vector(c.a13,c.a23)},a.prototype.globalToLocal=function(a,b){var c=this.getMatrix();return new herman.math.Vector(a-c.a13,b-c.a23)},a.prototype.addChild=function(a){this.addChildAt(a,this.children.length)},a.prototype.addChildAt=function(b,c){return 0>c||c>this.children.length?void console.log("index out of bounds"):void(b instanceof a&&!this.hasChild(b)&&(b.parent&&b.parent.removeChild(b),this.children.splice(c,0,b),b.parent=this))},a.prototype.removeChild=function(b){b instanceof a&&this.hasChild(b)&&this.removeChildAt(this.children.indexOf(b))},a.prototype.removeChildAt=function(a){return 0>a||a>=this.children.length?void console.log("index out of bounds"):(this.children[a].parent=null,void this.children.splice(a,1))},a.prototype.hasChild=function(a){return-1!==this.children.indexOf(a)},a.prototype.getChildren=function(){return this.children},a.prototype.getChild=function(a){var b=this.children.indexOf(a);return-1!==b?this.children[b]:void 0},a.prototype.getChildAt=function(a){return 0>a||a>=this.children.length?void console.log("index out of bounds"):this.children[a]},a}),herman.namespace("Sprite",function(){"use strict";function a(a){herman.Node.call(this),this.bitmap=a}var b=herman.inherits(a,herman.Node);return b.draw=function(a){var b=this.getMatrix();a.save(),a.setTransform(b.a11,b.a21,b.a12,b.a22,b.a13,b.a23),a.drawImage(this.bitmap,-this.bitmap.width/2,-this.bitmap.height/2),a.restore()},b.update=function(a){this.draw(a),this.children.forEach(function(b){b.update(a)})},a}),herman.namespace("Text",function(){"use strict";function a(a){herman.Node.call(this),this.text=a}var b=herman.inherits(a,herman.Node);return b.draw=function(a){var b=this.getMatrix();a.save(),a.setTransform(b.a11,b.a21,b.a12,b.a22,b.a13,b.a23),a.fillStyle="#00F",a.font="italic 30pt Arial",a.fillText(this.text,20,50),a.restore()},b.update=function(a){this.draw(a)},a});