/*! herman 2014-03-04 */
window.herman=window.herman||{},function(a){a.VERSION=.1,a.createModule=function(b,c){var d=b.split("."),e=d.pop(),f=a;"herman"===d[0]&&d.shift();for(var g=0;g<d.length;g++)f=f[d[g]]=f[d[g]]||{};f[e]=c.call(this)},a.inherits=function(a,b){var c=Object.create(b.prototype);return c.constructor=a,a.prototype=c,a.prototype.super=b.prototype,a.prototype},window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}()}(window.herman),herman.createModule("Renderer",function(){"use strict";function a(a){this.canvas=a,this.context=this.canvas.getContext("2d")}return a.prototype={update:function(a){this.context.clearRect(0,0,this.canvas.width,this.canvas.height),a.update(this.context)}},a}),herman.createModule("Math",function(){"use strict";var a={};return a.DEG_TO_RAD=a.PI/180,a}),herman.createModule("Matrix",function(){function a(){this.a11=1,this.a12=0,this.a13=0,this.a21=0,this.a22=1,this.a23=0}var b=Math.PI/180,c=5;return a.prototype={translate:function(a,b){return this.a13+=a,this.a23+=b,this},rotate:function(a){a=(a*b).toFixed(c);var d=Math.sin(a),e=Math.cos(a),f=this.a11,g=this.a21;return this.a11=e*f+d*this.a12,this.a12=-d*f+e*this.a12,this.a21=e*g+d*this.a22,this.a22=-d*g+e*this.a22,this},scale:function(a){return this.a11*=a,this.a12*=a,this.a21*=a,this.a22*=a,this},transform:function(a,b,c,d){return this.translate(a,b).rotate(c).scale(d)},multiply:function(a){var b=this.a11,c=this.a12,d=this.a21,e=this.a22;return this.a11=b*a.a11+c*a.a21,this.a12=b*a.a12+c*a.a22,this.a13=b*a.a13+c*a.a23+this.a13,this.a21=d*a.a11+e*a.a21,this.a22=d*a.a12+e*a.a22,this.a23=d*a.a13+e*a.a23+this.a23,this},invert:function(){},identity:function(){return this.a11=1,this.a12=0,this.a13=0,this.a21=0,this.a22=1,this.a23=0,this},print:function(){return"matrix\n"+this.a11+" "+this.a12+" "+this.a13+"\n"+this.a21+" "+this.a22+" "+this.a23+"\n[0] [0] [1]\n"}},a}),herman.createModule("Vector",function(){"use strict";function a(a,b){this.x=a,this.y=b}return a.prototype={add:function(){}},a}),herman.createModule("Tween",function(){"use strict";function a(b,c,d){var e,f,g,h={},i=(new Date).getTime(),j={},k=function(){};return Object.keys(c).forEach(function(a){j[a]=b[a]}),h.start=function(){!function a(){e=(new Date).getTime()-i,f=Math.min(e/d,1),Object.keys(c).forEach(function(a){b[a]=j[a]+(c[a]-j[a])*f}),window.renderer.update(window.stage),1>f?g=window.requestAnimationFrame(a):(k&&k(),window.cancelAnimationFrame(g))}()},h.stop=function(){window.cancelAnimationFrame(g)},h.clone=function(){return new a(b,property,d)},h.done=function(a){return k=a,this},h}return a}),herman.createModule("Node",function(){function a(){this.tag=void 0,this.stage=void 0,this.parent=void 0,this.children=[],this.matrix=new herman.Matrix,this.x=0,this.y=0,this.scale=1,this.rotation=0,this.anchorX=0,this.anchorY=0,this.width=0,this.height=0}return a.prototype={getMatrix:function(){return this.matrix=(new herman.Matrix).transform(this.x+this.anchorX,this.y+this.anchorY,this.rotation,this.scale),this.parent&&(this.matrix=this.parent.getMatrix().multiply(this.matrix)),this.matrix},localToGlobal:function(a,b){var c=this.getMatrix();return c.translate(a,b),new herman.Vector(c.a13,c.a23)},globalToLocal:function(a,b){var c=this.getMatrix();return new herman.Vector(a-c.a13,b-c.a23)},addChild:function(a){this.addChildAt(a,this.children.length)},addChildAt:function(b,c){return 0>c||c>this.children.length?(console.log("index out of bounds"),void 0):(b instanceof a&&!this.hasChild(b)&&(b.parent&&b.parent.removeChild(b),this.children.splice(c,0,b),b.parent=this),void 0)},removeChild:function(b){b instanceof a&&this.hasChild(b)&&this.removeChildAt(this.children.indexOf(b))},removeChildAt:function(a){return 0>a||a>=this.children.length?(console.log("index out of bounds"),void 0):(this.children[a].parent=null,this.children.splice(a,1),void 0)},hasChild:function(a){return-1!==this.children.indexOf(a)},getChildren:function(){return this.children},getChild:function(a){var b=this.children.indexOf(a);return-1!==b?this.children[b]:void 0},getChildAt:function(a){return 0>a||a>=this.children.length?(console.log("index out of bounds"),void 0):this.children[a]}},a}),herman.createModule("dom.Node",function(){function a(a){herman.Node.call(this),a?this.element=a:(this.element=document.createElement("div"),this.element.className="div-node",this.element.style.width="100px",this.element.style.height="100px",this.element.style.backgroundColor="white",this.element.style.border="1px solid red"),this.element.style.webkitPerspective=1e3,this.element.style.webkitBackfaceVisibility="hidden",this.element.style.position="absolute"}var b=herman.inherits(a,herman.Node);return b.update=function(){var a=this.getMatrix();this.element.style.webkitTransform="matrix("+a.a11+","+a.a21+","+a.a12+","+a.a22+","+a.a13+","+a.a23+")";for(var b=0;b<this.children.length;b++)this.children[b].update()},b.addChild=function(a){this.super.addChild.apply(this,arguments),a.update(),document.getElementById("domStage").appendChild(a.element)},b.removeChild=function(a){this.super.removeChild.apply(this,arguments),document.getElementById("domStage").removeChild(a.element)},a}),herman.createModule("canvas.Node",function(){function a(){herman.Node.call(this),this.backgroundColor="#"+Math.floor(16777215*Math.random()).toString(16)}var b=herman.inherits(a,herman.Node);return b.draw=function(a){var b=this.getMatrix();a.save(),a.setTransform(b.a11,b.a21,b.a12,b.a22,b.a13,b.a23),a.fillStyle=this.backgroundColor,a.fillRect(-50,-50,100,100),a.restore()},b.update=function(a){this.draw(a),this.children.forEach(function(b){b.update(a)})},a});